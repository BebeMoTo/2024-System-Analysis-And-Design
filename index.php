<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Automated Healthcare System</title>
  <link rel="stylesheet" href="bootstrap.css">
  <link rel="stylesheet" href="index.css">
  <link rel="shortcut icon" href="images/favicon.png" type="image/x-icon">
</head>

<body>
  <header class="header-main">
    <nav class="navbar navbar-expand-lg bg-body-tertiary nav-underline fixed-top" data-bs-theme="dark" style="z-index: 5;">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">HEALTHCARE SYSTEM</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
          <div class="navbar-nav">
            <a onclick="" class="nav-link active" aria-current="page" href="#">Home</a>
            <a class="nav-link request">Request</a>
            <a class="nav-link id">Register</a>
            <a class="nav-link admin">Admin</a>
            <a class="nav-link developer-button">Developers</a>
          </div>
        </div>
      </div>
    </nav>
    <h1 class="title-main">Automated Healthcare<br>System</h1>
    <div class="darken hidden"></div>

    <div class="developers hidden">
      <div class="accordion accordion-flush" id="accordionExample">
        <div class="accordion-item">
          <h2 class="accordion-header">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
              Ara√±ez, Kevin
            </button>
          </h2>
          <div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#accordionExample">
            <div class="accordion-body">
              <img src="images/developers/Kevin.png" alt="">
              <p>Gandang umaga haring araw, tulala sa kaning bahaw
                Pang-amoy na nabusog sa lumalapang alingasaw
                Ng kalye't kairitang, halayang ininit lang
                Tiis lang ang lasa parang minumog na sinigang
                Pasok sa paaralan, gano'n pa din pag-uwi
                Dakilang tagahiwalay ng de kolor sa puti
                Poso na nagturo sa'king, pa'no humingang malalim
                Lumaki na gutom lamang ang 'di kayang kalabanin</p>
              <div class="socials">
                <span class="socEmail socCrumbs"><a href="">E-mail</a></span>
                <span class="socFacebook socCrumbs"><a href="">Facebook</a></span>
              </div>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
              Buitre, Jay-R
            </button>
          </h2>
          <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
            <div class="accordion-body">
              <img src="images/developers/Jay-R.png" alt="">
              <p>
                Let's raise a glass or two
                To all the things I've lost on you, oh
                Tell me are they lost on you? Oh
                Just that you could cut me loose, oh
                After everything I've lost on you, is that lost on you?
                Oh, oh
                Oh, is that lost on you?
                Oh, oh
                Baby, is that lost on you? Is that lost on you?</p>
              <div class="socials">
                <span class="socEmail socCrumbs"><a href="mailto:jayrbuitre0226@gmail.com">E-mail</a></span>
                <span class="socFacebook socCrumbs"><a href="https://web.facebook.com/jayrculdora.buitre">Facebook</a></span>
                <span class="socInsta socCrumbs"><a href="https://www.instagram.com/bebeniyato/">Instagram</a></span>
                <span class="socGithub socCrumbs"><a href="https://github.com/BebeMoTo">Github</a></span>
                <span class="socLinked socCrumbs"><a href="https://www.linkedin.com/in/jay-r-buitre-671b17256/">LinkedIn</a></span>

              </div>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
              Miana, David Jr.
            </button>
          </h2>
          <div id="collapseThree" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
            <div class="accordion-body">
              <img src="images/developers/David.png" alt="">
              <p>Sawagashii hibi ni waraenai kimi ni
                Omoitsuku kagiri mabushii asu o
                Akenai yoru ni ochite yuku mae ni
                Boku no te o tsukande hora
                Wasurete shimaitakute tojikometa hibi mo
                Dakishimeta nukumori de tokasu kara
                Kowakunai yo itsuka hi ga noboru made
                Futari de iyou</p>
              <div class="socials">
                <span class="socEmail socCrumbs"><a href="">E-mail</a></span>
                <span class="socFacebook socCrumbs"><a href="">Facebook</a></span>
              </div>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
              Lozada, John Roland
            </button>
          </h2>
          <div id="collapseFour" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
            <div class="accordion-body">
              <img src="images/developers/Roland.png" alt="">
              <p>And now, the end is near
                And so I face the final curtain
                My friend, I'll say it clear
                I'll state my case, of which I'm certain
                I've lived a life that's full
                I traveled each and every highway
                And more, much more than this
                I did it my way</p>
              <div class="socials">
                <span class="socEmail socCrumbs"><a href="">E-mail</a></span>
                <span class="socFacebook socCrumbs"><a href="">Facebook</a></span>
              </div>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
              Romero, Paul Patrick
            </button>
          </h2>
          <div id="collapseFive" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
            <div class="accordion-body">
              <img src="images/developers/Paul.jpg" alt="">
              <p>Don't mess with me, I'm a big boy now and I'm very scary
                I punch my walls, stay out at night, and I do karate
                Don't message me 'cause I won't reply, I wanna make you cry
                Ain't that how it's s'posed to be? Though it isn't me
                Boys will be bugs, right?
                Boys will be bugs, right?</p>
              <div class="socials">
                <span class="socEmail socCrumbs"><a href="">E-mail</a></span>
                <span class="socFacebook socCrumbs"><a href="">Facebook</a></span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>

  <div class="register-form hidden">
    <form class="form" action="includes/form-registerHandler.php" method="POST" autocomplete="off">
      <p class="title">Register </p>
      <div class="flex">
        <label>
          <input required="" placeholder="" type="text" class="input" name="regFirstName">
          <span>Firstname</span>
        </label>

        <label>
          <input required="" placeholder="" type="text" class="input" name="regLastName">
          <span>Lastname</span>
        </label>
      </div>

      <div class="flex">
        <label>
          <input required="" placeholder="" type="number" class="input" name="regAge">
          <span>Age</span>
        </label>

        <label>
          <input required="" placeholder="" type="text" class="input" name="regSex">
          <span>Sex</span>
        </label>
      </div>

      <label>
        <input required="" placeholder="" type="text" class="input" name="regAddress">
        <span>Address</span>
      </label>

      <label>
        <input required="" placeholder="" type="text" class="input" name="regEmergency">
        <span>Contact in Case of Emergency - Phone</span>
      </label>
      <label>
        <input required="" placeholder="" type="text" class="input" name="regDiagnosis">
        <span>Medical Condition/s</span>
      </label>
      <button class="submit">Submit</button>
    </form>
  </div>

  <div class="admin-form hidden">
    <form class="form1" action="includes/form-adminHandler.php" method="POST" autocomplete="off">
      <p class="title">Admin Log-In </p>
      <p class="message"></p>
      <label>
        <input required="" placeholder="" type="text" class="input" name="adminUsername">
        <span>Username</span>
      </label>
      <label>
        <input required="" placeholder="" type="password" class="input" name="adminPassword">
        <span>Password</span>
      </label>
      <button class="submit">Submit</button>
    </form>
  </div>

  <div class="request-form hidden">
    <form class="form1 requestForm" action="includes/form-request.php" method="POST" autocomplete="off">
      <p class="title">Request for Medicine</p>
      <p class="message"></p>
      <label>
        <input required="" placeholder="" type="number" class="input" name="userID">
        <span>ID Number: </span>
      </label>
      <label>
        <select class="form-select" name="userMedSelect" aria-label="Default select example">
          <?php
          try {
            require_once "includes/dbh.inc.php";
            $query = "SELECT * FROM meds ORDER BY medName;";

            $stmt = $pdo->prepare($query);

            $stmt->execute();

            $results = $stmt->fetchAll(PDO::FETCH_ASSOC);

            if (empty($results)) {
              echo ('<option>There is no medicine in the database</option>
              <script>
              const requestForm = document.querySelector(".requestForm");
              requestForm.addEventListener("submit", () => {
                event.preventDefault();
              })
            </script>');
            } else {
              foreach ($results as $row) {
                $medName = htmlspecialchars($row["medName"]);
                $medID = htmlspecialchars($row["medID"]);

                echo ('
                    <option value="' . $medID . '">' . $medName . '</option>
                      ');
              }
            }
          } catch (PDOException $e) {
            die("Query Failed: " > $e->getMessage());
          }
          ?>
        </select>
      </label>
      <label>
        <input required="" placeholder="" type="number" class="input" name="userRequestAmount">
        <span>Amount: </span>
      </label>
      <button class="submit requestSubmit">Submit</button>
    </form>
  </div>

  <div class="toast-container position-fixed bottom-0 end-0 p-3">
    <div id="liveToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
      <div class="toast-header bg-success">
        <strong class="me-auto" style="color: white;">Success!!!</strong>
        <small style="color: white;">Yayyy!!!</small>
        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
      <div class="toast-body">
        Details Saved üòÅüòÅüòÅ
      </div>
    </div>
  </div>

  <div class="toast-container position-fixed bottom-0 end-0 p-3">
    <div id="liveToast1" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
      <div class="toast-header bg-danger">
        <strong class="me-auto" style="color: white;">Error!!!</strong>
        <small style="color: white;">Noooo!!!</small>
        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
      <div class="toast-body">
        Something went wrong!!!
      </div>
    </div>
  </div>

  <div class="toast-container position-fixed bottom-0 end-0 p-3">
    <div id="liveToast2" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
      <div class="toast-header bg-success">
        <strong class="me-auto" style="color: white;">Logged Out</strong>
        <small style="color: white;">Nice!!!</small>
        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
      <div class="toast-body">
        Logged out successfully!!!
      </div>
    </div>
  </div>

  <div class="toast-container position-fixed bottom-0 end-0 p-3">
    <div id="liveToast3" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
      <div class="toast-header bg-danger">
        <strong class="me-auto" style="color: white;">Error!!!</strong>
        <small style="color: white;">Noooo!!!</small>
        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
      <div class="toast-body">
        Request error!!!
      </div>
    </div>
  </div>


  <?php
  if (isset($_GET["medAmount"])) {
    $userMedAmount = $_GET["medAmount"];
    $userMedName = $_GET["medName"];
  }

  ?>

  <div class="toast-container position-fixed bottom-0 end-0 p-3">
    <div id="liveToast4" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
      <div class="toast-header bg-danger">
        <strong class="me-auto" style="color: white;">Error!!!</strong>
        <small style="color: white;">Noooo!!!</small>
        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
      <div class="toast-body">
        There is/are <?php echo $userMedAmount ?> pieces of <?php echo $userMedName ?> left!!!
      </div>
    </div>
  </div>

  <div class="toast-container position-fixed bottom-0 end-0 p-3">
    <div id="liveToast5" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
      <div class="toast-header bg-danger">
        <strong class="me-auto" style="color: white;">Error!!!</strong>
        <small style="color: white;">Noooo!!!</small>
        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
      <div class="toast-body">
        There is no user found!!!
      </div>
    </div>
  </div>

  <div class="toast-container position-fixed bottom-0 end-0 p-3">
    <div id="liveToast6" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
      <div class="toast-header bg-primary">
        <strong class="me-auto" style="color: white;">Processing...</strong>
        <small style="color: white;">Wait...</small>
        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
      <div class="toast-body">
        Request added successfully!!!
      </div>
    </div>
  </div>

  <script src="bootstrap.js"></script>
  <script src="index.js"></script>
  <script>
    if (window.location.href.includes("submitSuccessful")) {
      const toastLiveExample = document.getElementById('liveToast');
      const toastBootstrap = bootstrap.Toast.getOrCreateInstance(toastLiveExample);
      toastBootstrap.show();
    } else if (window.location.href.includes("loginError")) {
      const toastLiveExample = document.getElementById('liveToast1');
      const toastBootstrap = bootstrap.Toast.getOrCreateInstance(toastLiveExample);
      toastBootstrap.show();
    }
    if (window.location.href.includes("submitSuccessful")) {
      const toastLiveExample = document.getElementById('liveToast');
      const toastBootstrap = bootstrap.Toast.getOrCreateInstance(toastLiveExample);
      toastBootstrap.show();
    } else if (window.location.href.includes("logout")) {
      const toastLiveExample = document.getElementById('liveToast2');
      const toastBootstrap = bootstrap.Toast.getOrCreateInstance(toastLiveExample);
      toastBootstrap.show();
    } else if (window.location.href.includes("requestError=1")) {
      const toastLiveExample = document.getElementById('liveToast4');
      const toastBootstrap = bootstrap.Toast.getOrCreateInstance(toastLiveExample);
      toastBootstrap.show();
    } else if (window.location.href.includes("requestError")) {
      const toastLiveExample = document.getElementById('liveToast3');
      const toastBootstrap = bootstrap.Toast.getOrCreateInstance(toastLiveExample);
      toastBootstrap.show();
    } else if (window.location.href.includes("noUserFound")) {
      const toastLiveExample = document.getElementById('liveToast5');
      const toastBootstrap = bootstrap.Toast.getOrCreateInstance(toastLiveExample);
      toastBootstrap.show();
    } else if (window.location.href.includes("requestAdded")) {
      const toastLiveExample = document.getElementById('liveToast6');
      const toastBootstrap = bootstrap.Toast.getOrCreateInstance(toastLiveExample);
      toastBootstrap.show();
    }
  </script>
</body>

</html>